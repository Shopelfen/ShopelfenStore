(function(){var e={729:function(){},867:function(){},988:function(e,t,i){var n=i(729);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals),i(346).Z("74e2c6d4",n,!0,{})},712:function(e,t,i){var n=i(867);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals),i(346).Z("32c0ec1e",n,!0,{})},346:function(e,t,i){"use strict";function n(e,t){for(var i=[],n={},s=0;s<t.length;s++){var o=t[s],a=o[0],r={id:e+":"+s,css:o[1],media:o[2],sourceMap:o[3]};n[a]?n[a].parts.push(r):i.push(n[a]={id:a,parts:[r]})}return i}i.d(t,{Z:function(){return g}});var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},a=s&&(document.head||document.getElementsByTagName("head")[0]),r=null,l=0,c=!1,h=function(){},p=null,d="data-vue-ssr-id",u="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function g(e,t,i,s){c=i,p=s||{};var a=n(e,t);return f(a),function(t){for(var i=[],s=0;s<a.length;s++){var r=o[a[s].id];r.refs--,i.push(r)}t?f(a=n(e,t)):a=[];for(var s=0;s<i.length;s++){var r=i[s];if(0===r.refs){for(var l=0;l<r.parts.length;l++)r.parts[l]();delete o[r.id]}}}}function f(e){for(var t=0;t<e.length;t++){var i=e[t],n=o[i.id];if(n){n.refs++;for(var s=0;s<n.parts.length;s++)n.parts[s](i.parts[s]);for(;s<i.parts.length;s++)n.parts.push(v(i.parts[s]));n.parts.length>i.parts.length&&(n.parts.length=i.parts.length)}else{for(var a=[],s=0;s<i.parts.length;s++)a.push(v(i.parts[s]));o[i.id]={id:i.id,refs:1,parts:a}}}}function m(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function v(e){var t,i,n=document.querySelector("style["+d+'~="'+e.id+'"]');if(n){if(c)return h;n.parentNode.removeChild(n)}if(u){var s=l++;t=w.bind(null,n=r||(r=m()),s,!1),i=w.bind(null,n,s,!0)}else t=y.bind(null,n=m()),i=function(){n.parentNode.removeChild(n)};return t(e),function(n){n?(n.css!==e.css||n.media!==e.media||n.sourceMap!==e.sourceMap)&&t(e=n):i()}}var x=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}();function w(e,t,i,n){var s=i?"":n.css;if(e.styleSheet)e.styleSheet.cssText=x(t,s);else{var o=document.createTextNode(s),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function y(e,t){var i=t.css,n=t.media,s=t.sourceMap;if(n&&e.setAttribute("media",n),p.ssrId&&e.setAttribute(d,t.id),s&&(i+="\n/*# sourceURL="+s.sources[0]+" */\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={id:n,exports:{}};return e[n](o,o.exports,i),o.exports}i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="bundles/shopelfenstore/",window?.__sw__?.assetPath&&(i.p=window.__sw__.assetPath+"/bundles/shopelfenstore/"),function(){"use strict";let{Component:e}=Shopware;e.register("shopelfen-store-overview",{template:" <sw-meteor-card>\n       {# TODO: Replace with content #}\n        <h2>Test</h2>\n </sw-meteor-card>"});let{Component:t}=Shopware;t.register("shopelfen-store-config",{template:"<template>\n  <h2>Config</h2>\n</template>",created(){console.log("Aktuelle Domain:",window.location.origin)}});let{Component:n}=Shopware;n.register("shopelfen-store-index",{template:"<template>\n    <router-view></router-view>\n</template>"});let{Component:s}=Shopware;s.register("shopelfen-store-listing",{template:' <sw-meteor-page>\n        <template #search-bar>\n            <sw-search-bar\n                    initialSearchType="License"\n                    :initialSearch="term"\n                    :placeholder="$tc(\'shopelfen-store.general.searchBarPlaceholder.license\')"\n                    typeSearchAlwaysInContainer\n                    ref="searchBar"\n                    @search="onSearch">\n\n            </sw-search-bar>\n        </template>\n\n        <template #page-tabs>\n            {#\n                <sw-tabs-item :route="{ name: \'shopelfen.store.my-extensions.listing.overview\' }">{{ $tc(\'shopelfen-store.tabs.overview\') }}</sw-tabs-item>\n                <sw-tabs-item :route="{ name: \'shopelfen.store.my-extensions.listing.config\' }">{{ $tc(\'shopelfen-store.tabs.config\') }}</sw-tabs-item>\n            #}\n\n            <sw-tabs-item :route="{ name: \'shopelfen.store.my-extensions.listing.license\' }">{{ $tc(\'shopelfen-store.tabs.licenses\') }}</sw-tabs-item>\n\n        </template>\n\n        <template #default>\n            <router-view></router-view>\n        </template>\n    </sw-meteor-page>'}),i(712);var o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAABMCAYAAADHl1ErAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEvmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSfvu78nIGlkPSdXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQnPz4KPHg6eG1wbWV0YSB4bWxuczp4PSdhZG9iZTpuczptZXRhLyc+CjxyZGY6UkRGIHhtbG5zOnJkZj0naHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyc+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczpBdHRyaWI9J2h0dHA6Ly9ucy5hdHRyaWJ1dGlvbi5jb20vYWRzLzEuMC8nPgogIDxBdHRyaWI6QWRzPgogICA8cmRmOlNlcT4KICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0nUmVzb3VyY2UnPgogICAgIDxBdHRyaWI6Q3JlYXRlZD4yMDI1LTA2LTIzPC9BdHRyaWI6Q3JlYXRlZD4KICAgICA8QXR0cmliOkV4dElkPmIzZGM4NzZiLTIzNGEtNDg1NC04NTgzLTY4MTQ0NGVmMGZhYTwvQXR0cmliOkV4dElkPgogICAgIDxBdHRyaWI6RmJJZD41MjUyNjU5MTQxNzk1ODA8L0F0dHJpYjpGYklkPgogICAgIDxBdHRyaWI6VG91Y2hUeXBlPjI8L0F0dHJpYjpUb3VjaFR5cGU+CiAgICA8L3JkZjpsaT4KICAgPC9yZGY6U2VxPgogIDwvQXR0cmliOkFkcz4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6ZGM9J2h0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvJz4KICA8ZGM6dGl0bGU+CiAgIDxyZGY6QWx0PgogICAgPHJkZjpsaSB4bWw6bGFuZz0neC1kZWZhdWx0Jz5wbHVnaW4ucG5nIC0gMTwvcmRmOmxpPgogICA8L3JkZjpBbHQ+CiAgPC9kYzp0aXRsZT4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRm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";let{Component:a,Mixin:r}=Shopware;a.register("shopelfen-store-license",{template:'<template>\n    <div class="license-container">\n        \n        <template v-if="isLoading">\n            <sw-skeleton-bar\n                    v-for="n in 5"\n                    :key="n"\n                    variant="card"\n                    style="margin-bottom: 16px; height: 60px"\n            />\n        </template>\n\n        <template v-else>\n\n            <shopelfen-store-license-controls\n            :filterByActive="filterByActive"\n            :selectedSortingOption="selectedSortingOption"\n            @update:filter-active="filter"\n            @update:sorting-option="changeSortingOption">\n\n                <template #refresh>\n                    <sw-button\n                            size="small"\n                            variant="secondary"\n                            @click="loadPlugins">\n                        Refresh\n                    </sw-button>\n                </template>\n            </shopelfen-store-license-controls>\n\n            <license-card\n                    v-for="(plugin, index) in filteredPlugins"\n                    :key="index"\n                    :ref="`licenseCard_${index}`"\n                    :title="plugin.title"\n                    :extensionId="plugin.id"\n                    :active="plugin.active"\n                    :validUntil="plugin.validUntil"\n                    :technicalName="plugin.technicalName"\n                    :manufacturer="plugin.manufacturer"\n                    :image="plugin.image"\n            ></license-card>\n        </template>\n    </div>\n</template>',inject:{systemConfigApiService:"systemConfigApiService",hxApiService:"hxApi"},mixins:[r.getByName("notification")],data(){return{plugins:[],filteredPlugins:[],filterByActive:!1,isLoading:!0,selectedSortingOption:"updated-at"}},computed:{extensionRepository(){return Shopware.Service("repositoryFactory").create("plugin")}},created(){this.loadPlugins()},methods:{async updateFilteredPlugins(){if(this.filterByActive){let e=[];for(let t of this.plugins)t.active&&e.push(t);this.filteredPlugins=e}else this.filteredPlugins=this.plugins},async checkIfInstalled(e){if(null==e)return this.createNotificationError({title:"Unknown Name",message:"Diese Extension hat keinen Namen. Bitte kontaktieren Sie den Entwickler."}),!1;let t=new Shopware.Data.Criteria;t.addFilter(Shopware.Data.Criteria.equals("name",e));try{let e=await this.extensionRepository.search(t,Shopware.Context.api);if(0===e.total)return!1;{let t=e.getAt(0);return null!==t.installedAt}}catch(e){return this.createNotificationError({title:"Error while searching for product",message:e}),!0}},async loadPlugins(){this.isLoading=!0,this.plugins=[];let e=await this.systemConfigApiService.getValues("ShopelfenStore.config");if(console.log(e),e["ShopelfenStore.config.verification"]){let t=e["ShopelfenStore.config.myConfigKey"]||"",i=e["ShopelfenStore.config.storeNumber"]||"";await this.fetchPlugins(t,i)}await this.updateFilteredPlugins(),this.filterByActive=!1,this.isLoading=!1},async fetchPlugins(e,t){this.hxApiService.fetchPlugins(t,e).then(e=>{if("success"===e.type){for(let t of e.data||[])if("invalid"!==t.version){let e={title:t.title,manufacturer:t.author,technicalName:t.technicalName,id:t.id,image:t.hasImage?`https://my.shopelfen.de/extension-api/extension-image/${t.id}`:o,active:t.active,validUntil:t.validUntil};this.plugins.push(e)}}}).catch(e=>{this.createNotificationError({title:"Fehler",message:e.message||"Fehler beim Abrufen der Lizenzen"})})},filter(e){this.filterByActive=!this.filterByActive,console.log("Setting filter state to: ",e),this.updateFilteredPlugins()},changeSortingOption(e){console.log("Set to:",e),this.selectedSortingOption=e}}}),i(988);let{Component:l,Mixin:c}=Shopware;l.register("license-card",{template:'<div class="license-card" :class="{ \'installed\': isInstalled, \'not-installed\': !isInstalled }" v-show="!isHidden">\n    <div class="license-card__preview" :style="image ? { backgroundImage: `url(${image})` } : {}">\n        \n    </div>\n\n    <div class="license-card__info-grid">\n        <div class="license-card__info-name" v-if="title">\n            {{ title }}\n        </div>\n        <div class="license-card__info-description" v-if="manufacturer">\n            {{ manufacturer }}\n        </div>\n\n        <div class="license-card__info-status">\n\n            <span v-if="active">{{ $tc(\'shopelfen-store.license.renewal\', { date: formattedDate }) }}</span>\n            <span v-else>{{  $tc(\'shopelfen-store.license.renewalExpired\', { date: formattedDate }) }}</span>\n        </div>\n\n        <div class="license-card__info-action">\n            <template v-if="isInstalled">\n                <template v-if="loadingActive">\n                    <sw-loader size="64px"></sw-loader>\n                </template>\n                <template>\n                    <sw-switch-field style="margin-top: 0; margin-bottom: 0;" :value="isActive" @update:value="toggleActive"></sw-switch-field>\n                </template>\n\n                <template v-if="isUpdateAvailable">\n                    <mt-button\n                            size="small"\n                            :isLoading="isLoadingUpdate"\n                            variant="primary"\n                            @click.stop="update">\n                        {{ version }} -> {{ updateToVersion }}\n                    </mt-button>\n                </template>\n                <template v-else>\n                    <span v-if="version" class="license-card__version">{{ version }}</span>\n                </template>\n                <mt-button\n                        size="small"\n                        variant="danger"\n                        @click.stop="requestDeletion">\n                    {{ $tc(\'shopelfen-store.extension.delete\') }}\n                </mt-button>\n            </template>\n\n            <template v-else-if="isDownloaded">\n                <template v-if="loadingActive">\n                    <sw-loader size="16px"></sw-loader>\n                </template>\n                <template v-else>\n                    <mt-button\n                            size="small"\n                            variant="primary"\n                            @click.stop="requestInstallation">\n                        {{ $tc(\'shopelfen-store.extension.install\') }}\n                    </mt-button>\n\n                    <mt-button\n                            size="small"\n                            variant="danger"\n                            @click.stop="requestDeletion">\n                        {{ $tc(\'shopelfen-store.extension.delete\') }}\n                    </mt-button>\n                </template>\n            </template>\n\n            <template v-else>\n                <mt-button\n                        size="small"\n                        variant="primary"\n                        @click.stop="requestDownload">\n                    {{ $tc(\'shopelfen-store.extension.download\') }}\n                </mt-button>\n            </template>\n        </div>\n    </div>\n</div>\n',inject:{systemConfigApiService:"systemConfigApiService",hxApiService:"hxApi",hxShopwareUtilityService:"HxShopwareUtility"},mixins:[c.getByName("notification")],compatConfig:Shopware.compatConfig,props:{extensionId:{type:String,require:!1,default:null},title:{type:String,require:!1,default:null},technicalName:{type:String,required:!1,default:null},manufacturer:{type:String,require:!1,default:null},image:{type:String,require:!1,default:null},active:{type:Boolean,require:!1,default:!1},validUntil:{type:String,require:!1,default:null},type:{type:String,required:!1,default:"plugin"}},data(){return{isHidden:!1,loadingActive:!1,isActive:!1,isLoadingUpdate:!1,isUpdateAvailable:!1,updateToVersion:null,isInstalled:!1,isDownloaded:!1,key:null,storeNumber:null,verified:!1,version:"",composerName:""}},computed:{formattedDate(){return this.validUntil?this.validUntil:"--.--.----"},extensionRepository(){return Shopware.Service("repositoryFactory").create("plugin")},deletable(){return this.isInstalled||this.isDownloaded}},async mounted(){this.loadConfigValues().then(()=>{this.generalCheck()})},methods:{async loadConfigValues(){this.loadingActive=!0;try{let e=await this.systemConfigApiService.getValues("ShopelfenStore.config");this.key=e["ShopelfenStore.config.myConfigKey"]||"",this.storeNumber=e["ShopelfenStore.config.storeNumber"]||"",this.verified=e["ShopelfenStore.config.verification"]||!1}catch(e){console.log("Error while loading config values",e)}},generalCheck(){this.hxApiService.checkFolderInstalled(this.technicalName,Shopware.Context.api.authToken.access).then(e=>{if(e.total>0){let t=e.data[0];this.isDownloaded=!0,console.log(t.installedAt),console.log("Setting Version to: "+t.version),this.version=t.version,void 0!==t.installedAt&&null!==t.installedAt&&(this.isInstalled=!0,!0===t.active&&(this.isActive=!0,this.version=t.version))}this.checkForCustomUpdates(this.version)}).catch(e=>{console.log(e),this.loadingActive=!1})},setHiddenState(e){this.isHidden=e,console.log("Setting hidden state to: "+e)},setActiveState(e){console.log("Setting active state to: "+e),this.isActive=e},async requestDownload(){if(!1===this.verified){this.createNotificationError({title:"Error",message:"Du bist noch nicht verifiziert."});return}this.hxApiService.installPluginInternally(this.technicalName,this.key,Shopware.Context.api.authToken.access,this.storeNumber,this.extensionId).then(e=>{console.log(e),"success"===e.type&&this.hxShopwareUtilityService.refreshPlugins(Shopware.Context.api.authToken.access).then(()=>{this.reload()}).catch(()=>{this.createNotificationError({title:"Error",message:"Die Erweiterung konnte nicht heruntergeladen werden. Bitte versuche es sp\xe4ter erneut."})})}).catch(e=>console.log(e))},async requestInstallation(){console.log("Installing plugin: "+this.title),this.install(),this.createNotificationSuccess({title:this.$tc("shopelfen-store.extension.installation.title"),message:this.$tc("shopelfen-store.extension.installation.description",0,{extension:this.title})})},async requestDeletion(){console.log(Shopware.Context.api.authToken.access),this.isInstalled?this.hxShopwareUtilityService.uninstallPlugin(Shopware.Context.api.authToken.access,this.technicalName).then(()=>{this.hxShopwareUtilityService.clearShopwareCache(Shopware.Context.api.authToken.access).then(()=>{this.reload(),this.createNotificationSuccess({title:this.$tc("shopelfen-store.extension.uninstall.title"),message:this.$tc("shopelfen-store.extension.uninstall.description",0,{extension:this.title})})}).catch(()=>{this.makeCacheError()})}).catch(e=>console.log(e)):this.hxShopwareUtilityService.removePlugin(Shopware.Context.api.authToken.access,this.technicalName).then(()=>{this.hxShopwareUtilityService.clearShopwareCache(Shopware.Context.api.authToken.access).then(()=>{this.reload(),this.createNotificationSuccess({title:this.$tc("shopelfen-store.extension.remove.title"),message:this.$tc("shopelfen-store.extension.remove.description",0,{extension:this.title})})}).catch(()=>{this.makeCacheError()})}).catch(e=>console.log(e))},async checkIfInstalled(){null==this.title&&(this.createNotificationError({title:"Unknown Name",message:"Diese Extension hat keinen Namen. Bitte kontaktieren Sie den Entwickler."}),this.isInstalled=!1);let e=new Shopware.Data.Criteria;e.addFilter(Shopware.Data.Criteria.equals("name",this.title));try{let t=await this.extensionRepository.search(e,Shopware.Context.api);if(0!==t.total){let e=t.getAt(0);this.isInstalled=null!==e.installedAt,this.isInstalled||(this.isDownloaded=!1)}else this.isInstalled=!1,this.isDownloaded=!1}catch(e){this.createNotificationError({title:"Error while searching for product",message:e}),this.isInstalled=!1,this.isDownloaded=!1}},toggleActive(e){this.loadingActive=!0,e?this.hxApiService.activatePluginInternally(this.technicalName,Shopware.Context.api.authToken.access).then(()=>{this.hxShopwareUtilityService.clearShopwareCache(Shopware.Context.api.authToken.access).then(()=>{this.loadingActive=!1,this.reload(),this.makeActivationSuccess()}).catch(()=>{this.loadingActive=!1,this.makeCacheError()})}).catch(e=>{this.loadingActive=!1,console.log(e)}):this.hxApiService.deactivatePluginInternally(this.technicalName,Shopware.Context.api.authToken.access).then(()=>{this.hxShopwareUtilityService.clearShopwareCache(Shopware.Context.api.authToken.access).then(()=>{this.loadingActive=!1,this.reload(),this.makeDeactivationSuccess()}).catch(e=>{this.loadingActive=!1,this.makeCacheError()})}).catch(e=>{this.loadingActive=!1,console.log(e)}),this.isActive=e,console.log("Toggling active state to: "+this.isActive)},async checkIfActive(){this.loadingActive=!0,null==this.title&&(this.createNotificationError({title:"Unknown Name",message:"Diese Extension hat keinen Namen. Bitte kontaktieren Sie den Entwickler."}),this.isActive=!1,this.loadingActive=!1);let e=new Shopware.Data.Criteria;e.addFilter(Shopware.Data.Criteria.equals("name",this.title));try{let t=await this.extensionRepository.search(e,Shopware.Context.api);if(0!==t.total){let e=t.getAt(0);this.isActive=e.active,this.loadingActive=!1}else this.loadingActive=!1}catch(e){this.createNotificationError({title:"Error while searching for product",message:e}),this.isActive=!1,this.loadingActive=!1}},checkForCustomUpdates(e){if(console.log("\xdcbergeben Version: "+e),!this.verified){this.createNotificationError({title:"Error",message:"Fehler beim Abrufen der Konfiguration"}),this.loadingActive=!1;return}if(!1===this.isInstalled){this.loadingActive=!1;return}this.hxApiService.checkPluginUpdatable(this.storeNumber,this.key,this.extensionId,e).then(e=>{"success"===e.type&&(this.version===e.version?(console.log("Version is the same, no update available."),this.isUpdateAvailable=!1):(this.updateToVersion=e.version,this.isUpdateAvailable=e.updateable,console.log("Version is different, update available: "+this.isUpdateAvailable)),this.loadingActive=!1),console.log(e)}).catch(e=>{console.log(e),this.loadingActive=!1})},install(){this.hxApiService.installInternal(this.technicalName,Shopware.Context.api.authToken.access).then(()=>{this.reload()}).catch(e=>console.log(e))},makeCacheError(){this.createNotificationError({title:this.$tc("shopelfen-store.extension.cacheError.title",0,{extension:this.title}),message:this.$tc("shopelfen-store.extension.cacheError.description",0,{extension:this.title})})},makeActivationSuccess(){this.createNotificationSuccess({title:this.$tc("shopelfen-store.extension.activate.title",0,{extension:this.title}),message:this.$tc("shopelfen-store.extension.activate.description",0,{extension:this.title})})},makeDeactivationSuccess(){this.createNotificationSuccess({title:this.$tc("shopelfen-store.extension.deactivate.title",0,{extension:this.title}),message:this.$tc("shopelfen-store.extension.deactivate.description",0,{extension:this.title})})},reload(){setTimeout(()=>window.location.reload(),2e3)},update(){this.hxApiService.downloadPluginFromRemoteZip(this.technicalName,this.storeNumber,this.key,this.updateToVersion,this.extensionId,Shopware.Context.api.authToken.access,this.composerName).then(e=>{console.log("Result got back: ",e),this.hxApiService.updatePlugin(this.technicalName,Shopware.Context.api.authToken.access).then(()=>{this.hxShopwareUtilityService.clearShopwareCache(Shopware.Context.api.authToken.access).then(()=>{this.loadingActive=!1,this.makeActivationSuccess(),this.generalCheck()}).catch(()=>{this.loadingActive=!1,this.makeCacheError()})})}).catch(e=>{console.log(e)}),console.log("Updating plugin: "+this.title+" to Version: "+this.updateToVersion)}}});let{Component:h}=Shopware;h.register("shopelfen-store-license-controls",{template:'<div style="display: flex; justify-content: end; margin-bottom: 10px; margin-left: 10px; margin-right: 10px">\n\n    {#\n    <mt-switch\n            :value="filterByActive"\n            @input="onToggleFilter"\n            label="nicht Installierte Lizenzen ausblenden"\n    />\n    #}\n\n    <div style="display: flex; gap: 5px; align-items: center">\n        \n        <slot name="refresh"></slot>\n    </div>\n\n\n</div>',props:{filterByActive:{type:Boolean,default:!1},selectedSortingOption:{type:String,default:"updated-at"}},data(){return{sortingOptions:[{value:"updated-at",name:this.$tc("sw-extension.my-extensions.listing.controls.filterOptions.last-updated")},{value:"name-asc",name:this.$tc("sw-extension.my-extensions.listing.controls.filterOptions.name-asc")},{value:"name-desc",name:this.$tc("sw-extension.my-extensions.listing.controls.filterOptions.name-desc")}]}},methods:{onToggleFilter(e){this.$emit("update:filter-active",e)},onChangeSortingOption(e){this.$emit("update:sorting-option",e)}}});var p=JSON.parse('{"shopelfen-store":{"general":{"mainMenuItemGeneral":"Shopelfen Store","descriptionTextModule":"Manage this custom module here","searchBarPlaceholder":{"license":"Lizenzen durchsuchen","config":"Konfiguration durchsuchen"}},"tabs":{"config":"Konfiguration","overview":"Start","licenses":"Lizenzen"},"license":{"renewal":"Wird am { date } verl\xe4ngert","renewalExpired":"L\xe4uft am { date } aus"},"extension":{"download":"Herunterladen","install":"Installieren","delete":"L\xf6schen","activate":{"title":"Erweiterung aktiviert","description":"Die Aktivierung der Erweiterung {extension} war erfolgreich."},"deactivate":{"title":"Erweiterung deaktiviert","description":"Die Deaktivierung der Erweiterung {extension} war erfolgreich."},"installation":{"title":"Erweiterung installiert","description":"Die Installation der Erweiterung {extension} war erfolgreich."},"cacheError":{"title":"Cache Fehler","description":"Der Cache konnte nicht geleert werden. Bitte leere den Cache manuell."},"uninstall":{"title":"Erweiterung deinstalliert","description":"Die Deinstallation der Erweiterung {extension} war erfolgreich."},"remove":{"title":"Erweiterung entfernt","description":"Die Entfernung der Erweiterung {extension} war erfolgreich."}}}}'),d=JSON.parse('{"shopelfen-store":{"general":{"mainMenuItemGeneral":"My custom module","descriptionTextModule":"Manage this custom module here","searchBarPlaceholder":{"license":"Search trhough licenses","config":"Search through configuration"}},"tabs":{"config":"Configuration","overview":"Start","licenses":"Licenses"},"license":{"renewal":"Renews on {{ date }}","renewalExpired":"Expires on {{ date }}"},"extension":{"activate":{"title":"Extension activated","description":"Activation of Extension {extension} was successful."},"deactivate":{"title":"Erweiterung deactiviert","description":"Deactivation of Extension {extension} was successful."},"cacheError":{"title":"Cache Error","description":"The cache could not be cleared. Please clear the cache manually."},"installation":{"title":"Extension installed","description":"The installation of Extension {extension} was successful."},"uninstall":{"title":"Extension deinstalled","description":"Deinstallation of extension {extension} was successful."},"remove":{"title":"Extension Removed","description":"Removing extension {extension} from your system was successful."},"download":"Download","install":"Install","delete":"L\xf6schen"}}}');Shopware.Module.register("shopelfen-store",{type:"plugin",name:"Shopelfen Store",title:"shopelfen-store.general.mainMenuItemGeneral",description:"shopelfen-store.general.descriptionTextModule",color:"#39a94f",icon:"default-shopping-paper-bag-product",snippets:{"de-DE":p,"en-GB":d},routes:{"my-extensions":{path:"my-extensions",component:"shopelfen-store-index",redirect:{name:"shopelfen.store.my-extensions.listing"},meta:{privilege:"system.plugin_maintain"},children:{listing:{path:"listing",component:"shopelfen-store-listing",redirect:{name:"shopelfen.store.my-extensions.listing.license"},children:{config:{path:"config",component:"shopelfen-store-config"},overview:{path:"overview",component:"shopelfen-store-overview"},license:{path:"license",component:"shopelfen-store-license"}}}}}},navigation:[{label:"shopelfen-store.general.mainMenuItemGeneral",color:"#39a94f",path:"shopelfen.store.my-extensions.listing",icon:"default-shopping-paper-bag-product",parent:"sw-extension",position:100}]});let{Component:u,Mixin:g}=Shopware;u.register("shopelfen-settings-index",{template:'<sw-meteor-page>\n\n    <sw-meteor-card :title="$tc(\'shopelfen-settings.config.verification-card-title\')">\n\n        <div style="display: flex; gap: 10px;">\n            <div style="display: flex; justify-content: space-between; width: 100%">\n                <sw-field-label>{{ $tc(\'shopelfen-settings.config.customer-number-label\') }}</sw-field-label>\n            </div>\n            <div style="display: flex; justify-content: space-between; width: 100%">\n                <sw-field-label>{{ $tc(\'shopelfen-settings.config.store-number-label\') }}</sw-field-label>\n            </div>\n        </div>\n        <div style="display: flex; gap: 10px;">\n            <sw-text-field style="width: 100%"\n                    :value="customerNumber"\n                    @update:value="saveCustomerNumber">\n            </sw-text-field>\n            <sw-text-field style="width: 100%"\n                    :value="storeNumber"\n                    @update:value="saveStoreNumber">\n            </sw-text-field>\n        </div>\n\n        <div style="display: flex; justify-content: space-between;">\n            <sw-field-label>{{  $tc(\'shopelfen-settings.config.safety-token-label\') }}</sw-field-label>\n        </div>\n        <sw-text-field\n                :value="singleToken"\n                @update:value="saveSingleToken">\n        </sw-text-field>\n\n        <template #footer>\n            <div style="display: flex; justify-content: space-between;">\n                <div>\n                    <hx-verification-state></hx-verification-state>\n                </div>\n                <mt-button\n                        :block="false"\n                        :disabled="false"\n                        :ghost="false"\n                        :isLoading="isLoading"\n                        :showBackIcon="false"\n                        :showFrontIcon="false"\n                        size="medium"\n                        :square="false"\n                        variant="primary"\n                        @click="saveConfig">\n                    {{ $tc(\'shopelfen-settings.config.verification-card-save-button\') }}\n                </mt-button>\n            </div>\n        </template>\n    </sw-meteor-card>\n</sw-meteor-page>',inject:["systemConfigApiService"],mixins:[g.getByName("notification")],data(){return{singleToken:"",customerNumber:"",storeNumber:"",isLoading:!1}},created(){this.loadConfig()},methods:{saveSingleToken(e){this.singleToken=e},saveCustomerNumber(e){this.customerNumber=e},saveStoreNumber(e){this.storeNumber=e},loadConfig(){this.systemConfigApiService.getValues("ShopelfenStore.config").then(e=>{console.log(e),this.singleToken=e["ShopelfenStore.config.myConfigKey"]||"",this.customerNumber=e["ShopelfenStore.config.customerNumber"]||"",this.storeNumber=e["ShopelfenStore.config.storeNumber"]||""})},saveConfig(){this.isLoading=!0;let e={"ShopelfenStore.config.myConfigKey":this.singleToken,"ShopelfenStore.config.customerNumber":this.customerNumber,"ShopelfenStore.config.storeNumber":this.storeNumber};this.systemConfigApiService.saveValues(e,null).then(()=>{this.createNotificationSuccess({title:"Erfolg",message:"Werte wurden gespeichert!"})}),this.isLoading=!1}}});let{Component:f,Mixin:m}=Shopware;f.register("hx-verification-state",{template:'<template>\n        <mt-button\n                style="margin-top: 5px;"\n                :block="false"\n                :disabled="false"\n                :ghost="true"\n                :isLoading="isLoading"\n                :showBackIcon="false"\n                :showFrontIcon="false"\n                size="small"\n                :square="false"\n                variant="secondary"\n                @click="verify">\n            {{ verificationText }}\n        </mt-button>\n</template>',inject:{systemConfigApiService:"systemConfigApiService",hxApiService:"hxApi"},mixins:[m.getByName("notification")],data(){return{isLoading:!1,isVerified:!1,verificationText:"Du bist noch nicht authentifiziert."}},created(){this.isLoading=!0,this.systemConfigApiService.getValues("ShopelfenStore.config").then(e=>{console.log("Setting verification state from system config response:",e),this.isVerified=e["ShopelfenStore.config.verification"]||!1,this.isVerified&&(this.verificationText="Du bist Authentifiziert!")}),this.isLoading=!1},methods:{base64ToArrayBuffer(e){let t=window.atob(e),i=new Uint8Array(t.length);for(let e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i.buffer},arrayBufferToBase64(e){let t="",i=new Uint8Array(e),n=i.byteLength;for(let e=0;e<n;e++)t+=String.fromCharCode(i[e]);return window.btoa(t)},async verify(){this.isLoading=!0;let e=await this.systemConfigApiService.getValues("ShopelfenStore.config"),t=e["ShopelfenStore.config.myConfigKey"]||"",i=e["ShopelfenStore.config.customerNumber"]||"",n=e["ShopelfenStore.config.storeNumber"]||"";if(""===t||""===i||""===n){this.verificationText="Bitte f\xfclle alle Felder aus",this.isVerified=!1,this.isLoading=!1,this.createNotificationError({title:"Error",message:"Bitte f\xfclle alle Felder aus!"});return}this.hxApiService.verify(n,t).then(e=>{if(console.log("Result from service: ",e),"success"===e.type){this.isVerified=!0,this.verificationText="Du bist Authentifiziert!";let e={"ShopelfenStore.config.verification":this.isVerified};this.systemConfigApiService.saveValues(e,null).then(()=>{this.createNotificationSuccess({title:"Erfolg",message:"Du wurdest authentifiziert!"}),this.isLoading=!1})}}).catch(e=>{console.log("Error during verification:",e),this.isLoading=!1,this.isVerified=!1,this.verificationText="Fehler bei der Authentifizierung",this.createNotificationError({title:"Fehler",message:"Fehler bei der Authentifizierung: "+e.message})})}}});var v=JSON.parse('{"shopelfen-settings":{"title":"Shopelfen Einstellungen","description":"Hier k\xf6nnen Sie die Shopelfen Einstellungen konfigurieren.","config":{"verification-card-title":"Verifikation","verification-card-save-button":"Speichern","customer-number-label":"Kundennummer *","store-number-label":"Storenummer *","safety-token-label":"Sicherheits Token *"}}}'),x=JSON.parse('{"shopelfen-settings":{"title":"Shopelfen Settings","description":"Here you can configure the Shopelfen settings.","config":{"verification-card-title":"Verification","verification-card-save-button":"Save","customer-number-label":"Customer Number *","store-number-label":"Store Number *","safety-token-label":"Safety Token *"}}}');let{Module:w}=Shopware;w.register("shopelfen-settings",{type:"plugin",name:"ShopelfenSettings",title:"shopelfen-settings.title",description:"shopelfen-settings.description",color:"#ff3d58",icon:"default-shopping-paper-bag",snippets:{"de-DE":v,"en-GB":x},routes:{index:{component:"shopelfen-settings-index",path:"index"}},settingsItem:{group:"plugins",to:"shopelfen.settings.index",icon:"regular-flow",label:"Shopelfen Einstellungen"}});class y{DEFAULT_URL="https://my.shopelfen.de/extension-api";constructor(e){this.httpClient=e}verify(e,t){return this.post(`${this.DEFAULT_URL}/verify/${e}`,t).then(e=>e.data)}fetchPlugins(e,t){return this.httpClient.post(`${this.DEFAULT_URL}/fetch-licenses/${e}`,null,{headers:{"Content-Type":"application/json",Authorization:`key=${t}`}}).then(e=>e.data)}checkPluginUpdatable(e,t,i,n){return this.httpClient.post(`${this.DEFAULT_URL}/extension-updatable/${e}`,{extensionId:i,currentVersion:n},{headers:{"Content-Type":"application/json",Authorization:`key=${t}`}}).then(e=>e.data)}requestPluginInstallation(e,t,i){return this.post(`${this.DEFAULT_URL}/receive-extension/${e}/$extensionId`,t)}installPluginInternally(e,t,i,n,s){let o={headers:{Authorization:`key=${t}`},responseType:"blob"};return this.httpClient.post(`${this.DEFAULT_URL}/receive-extension/${n}/${s}`,null,o).then(t=>{let n=this.buildFormData(t.data,e);return this.httpClient.post("/shopelfen/receive-extension",n,{headers:{Authorization:`Bearer ${i}`,"X-Plugin-Name":`${e}.zip`}}).then(e=>e.data).catch(e=>{console.log("Error during plugin installation:",e)})})}installInternal(e,t){return this.httpClient.post(`/_action/extension/install/plugin/${e}`,null,{headers:{Authorization:`Bearer ${t}`}}).then(e=>e.data)}activatePluginInternally(e,t,i="plugin"){let n={headers:{Authorization:`Bearer ${t}`}};return this.httpClient.put(`/_action/extension/activate/${i}/${e}`,null,n).then(e=>e.data)}deactivatePluginInternally(e,t,i="plugin"){let n={headers:{Authorization:`Bearer ${t}`}};return this.httpClient.put(`/_action/extension/deactivate/${i}/${e}`,null,n).then(e=>e.data)}downloadPluginFromRemoteZip(e,t,i,n,s,o){return this.httpClient.post(`${this.DEFAULT_URL}/update-extension/${t}`,{updateToVersion:n,extensionId:s},{headers:{Authorization:`key=${i}`},responseType:"blob"}).then(t=>{let i=this.buildFormData(t.data,e);return this.httpClient.post("/shopelfen/update-receiver",i,{headers:{Authorization:`Bearer ${o}`,"X-Plugin-Name":`${e}.zip`}})}).then(e=>e.data).catch(e=>{throw console.error("Fehler beim Plugin-Update-Prozess:",e),e})}updatePlugin(e,t){console.log("Updatting: "+e);let i={headers:{Authorization:`Bearer ${t}`}};return this.httpClient.post("/shopelfen/update",{pluginName:e},i).then(e=>e.data).catch(e=>console.error("Fehler beim Hochladen des Plugins:",e))}checkFolderInstalled(e,t){let i={headers:{Authorization:`Bearer ${t}`}};return this.httpClient.post("/search/plugin",{filter:[{field:"name",type:"equals",value:e}]},i).then(e=>e.data).catch(()=>!1)}buildFormData(e,t){let i=new File([e],`${t}.zip`,{type:"application/zip",lastModified:Date.now()}),n=new FormData;return n.append("file",i),n}post(e,t){let i={headers:{"Content-Type":"application/json",Authorization:`key=${t}`}};return this.httpClient.post(e,null,i)}get(e,t){let i={headers:{"Content-Type":"application/json",Authorization:`key=${t}`}};return this.httpClient.get(e,null,i).then(e=>e.data)}}Shopware.Service().register("hxApi",e=>new y(Shopware.Application.getContainer("init").httpClient));class S{constructor(e){this.httpClient=e}clearShopwarehttpCache(){return this.httpClient.post("/api/_action/cache",{cache:["http"]}).then(e=>e.data)}clearShopwareConfigCache(){return this.httpClient.post("/api/_action/cache",{cache:["config"]}).then(e=>e.data)}clearShopwareTemplateCache(){return this.httpClient.post("/api/_action/cache",{cache:["template"]}).then(e=>e.data)}clearShopwareRouterCache(){return this.httpClient.post("/api/_action/cache",{cache:["router"]}).then(e=>e.data)}clearShopwareCache(e){let t={headers:{Authorization:`Bearer ${e}`}};return this.httpClient.delete("/_action/cache",t).then(e=>e.data)}refreshPlugins(e){return this.httpClient.post("/_action/extension/refresh",null,{headers:{Authorization:`Bearer ${e}`}}).then(e=>e.data)}uninstallPlugin(e,t){let i={headers:{Authorization:`Bearer ${e}`}};return this.httpClient.post(`/_action/extension/uninstall/plugin/${t}`,null,i).then(e=>e.data)}removePlugin(e,t){let i={headers:{Authorization:`Bearer ${e}`}};return this.httpClient.post(`/_action/extension/remove/plugin/${t}`,null,i).then(e=>e.data)}}Shopware.Service().register("HxShopwareUtility",e=>new S(Shopware.Application.getContainer("init").httpClient))}()})();